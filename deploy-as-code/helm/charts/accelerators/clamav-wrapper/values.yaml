# Common Labels
labels:
  app: "clamav-wrapper"
  group: "accelerators"

global:
  containerRegistry: varunkumar704

namespace: egov

# Ingress Configs
ingress:
  enabled: false
  zuul: false
  context: "clamav-wrapper"

# Container Configs
image:
  repository: "clamav-wrapper"
  tag: "latest"
replicas: "1"
healthChecks:
  enabled: false
  livenessProbePath: "/clamav-wrapper/health"
  readinessProbePath: "/clamav-wrapper/health"
appType: "go"
memory_limits: 512Mi

# Additional Container Envs
env: |
  - name: MESSAGE_BROKER_TYPE
    value: "kafka"
  - name: KAFKA_BROKERS
    valueFrom:
      configMapKeyRef:
        name: egov-config
        key: kafka-brokers 
  - name: KAFKA_TOPIC
    value: "file-scan-clamav-kafka"
  - name: KAFKA_CONSUMER_GROUP_ID
    value: "filestore-antivirus-group"
  - name: REDIS_ADDRESS
    value: "redis.backbone:6379"
  - name: REDIS_KEY
    value: "file-scan-clamav-redis"
  - name: CLAMAV_HOST
    value: "clamav.default.svc.cluster.local"
  - name: CLAMAV_PORT
    value: "3310"
  - name: CLAMAV_DIAL_TIMEOUT_SECONDS
    value: "10"
  - name: CLAMAV_CHUNK_SIZE_KB
    value: "32"
  - name: CLAMAV_MAX_FILE_SIZE_MB
    value: "25"
  - name: MINIO_ENDPOINT
    value: "minio.default.svc.cluster.local:9000"
  - name: MINIO_ACCESS_KEY
    valueFrom:
      secretKeyRef:
        name: minio
        key: rootUser
  - name: MINIO_SECRET_KEY
    valueFrom:
      secretKeyRef:
        name: minio
        key: rootPassword
  - name: STAGING_BUCKET
    value: "staging"
  - name: CLEAN_BUCKET
    value: "clean"
  - name: QUARANTINE_BUCKET
    value: "quarantine"
  - name: USE_SSL
    value: "false"