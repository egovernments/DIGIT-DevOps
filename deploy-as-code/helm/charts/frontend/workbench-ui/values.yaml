# Common Labels
labels:
  app: "workbench-ui"
  group: "web"

namespace: egov    

# Ingress Configs
ingress:
  enabled: true
  context: "workbench-ui"

# Init Containers Configs
initContainers:
  - name: init-create-env
    image: busybox
    command:
      - sh
      - "-c"
      - |
        echo "window.__env__ = { API_URL: \\"$API_URL\\", OTHER_ENV: \\"$OTHER_ENV\\" };" > /mnt/env.js
    env:
      - name: API_URL
        valueFrom:
          configMapKeyRef:
            name: workbench-ui-env
            key: api_url
      - name: OTHER_ENV
        valueFrom:
          configMapKeyRef:
            name: workbench-ui-env
            key: other_env

# Container Configs
image:
  repository: "workbench-ui"
replicas: "1"
httpPort: 80
healthChecks:
  enabled: false
  livenessProbePath: "/workbench-ui/"
  readinessProbePath: "/workbench-ui/"

extraVolumes: |
  - name: js-injection
    configMap:
      name: workbench-ui-js-injection


extraVolumeMounts: |
  - mountPath: /etc/nginx/conf.d/sub_filter.conf
    name: js-injection
    subPath: sub_filter.conf
  - mountPath: /usr/share/nginx/html/env.js
    name: js-injection
    subPath: env.js
