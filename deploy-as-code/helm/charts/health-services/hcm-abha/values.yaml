# Common Labels
labels:
  app: "hcm-abha"
  group: "health"

namespace: health

global:
    containerRegistry: sreejithk1903

# Ingress Configs
ingress:
  namespace: egov
  enabled: true
  zuul: true
  context: "hcm-abha"
  

# Init Containers Configs
initContainers:
  dbMigration:
    enabled: true
    schemaTable: "egov_hcm_abha_schema"
    image: 
      repository: "hcm-abha-db"
    env: |
      - name: DB_HOST
        valueFrom:
          configMapKeyRef:
            name: egov-config
            key: db-host
      - name: DB_PORT
        value: "5432"
      - name: DB_NAME
        valueFrom:
          configMapKeyRef:
            name: egov-config
            key: db-name
      - name: DB_USER
        valueFrom:
          secretKeyRef:
            name: db
            key: username
      - name: DB_PASSWORD
        valueFrom:
          secretKeyRef:
            name: db
            key: password
      - name: DB_SSL_MODE
        value: "require"  


# Container Configs
image:
  repository: "hcm-abha"
  tag: "multiarch"
replicas: 1
appType: "go"
tracing-enabled: true # Assuming you want to keep tracing
healthChecks:
  enabled: false # Disabled as requested
  livenessProbePath: "/health"
  readinessProbePath: "/health"
hcm-abha:
  resources:
    limits:
      cpu:    "50m"
      memory: "100Mi"
    requests:
      cpu:    "100m"
      memory: "256Mi"  

# Additional Container Envs
env: |
  - name: REST_PORT
    value: "8080"
  - name: GRPC_PORT
    value: "8089"
  - name: DB_HOST
    valueFrom:
      configMapKeyRef:
        name: egov-config
        key: db-host
  - name: DB_PORT
    value: "5432"
  - name: DB_SSL_MODE
    value: "require"
  - name: DB_NAME
    valueFrom:
      configMapKeyRef:
        name: egov-config
        key: db-name
  - name: DB_USER
    valueFrom:
      secretKeyRef:
        name: db
        key: username
  - name: DB_PASSWORD
    valueFrom:
      secretKeyRef:
        name: db
        key: password
  - name: REDIS_HOST
    value: "redis.backbone"
  - name: REDIS_PORT
    value: "6379"
  - name: REDIS_DB
    value: "0"
  - name: JAEGER_SAMPLER_PARAM
    value: "1" 
  - name: PUBLIC_KEY_URL
    value: "https://healthidsbx.abdm.gov.in/api/v1/auth/cert"
  - name: OTP_REQUEST_URL
    value: "https://abhasbx.abdm.gov.in/abha/api/v3/enrollment/request/otp"
  - name: ENROL_BY_AADHAAR_URL
    value: "https://abhasbx.abdm.gov.in/abha/api/v3/enrollment/enrol/byAadhaar"
  - name: ABDM_CLIENT_ID
    valueFrom:
      secretKeyRef:
        name: egov-abha
        key: abha_client_id
  - name: ABDM_CLIENT_SECRET
    valueFrom:
      secretKeyRef:
        name: egov-abha
        key: abha_client_secret
  - name: ABDM_AUTH_URL
    value: "https://dev.abdm.gov.in/gateway/v0.5/sessions"
  - name: ABHA_GET_CARD_URL
    value: "https://healthidsbx.abdm.gov.in/api/v1/account/getCard"
  - name: ABHA_GET_SVG_CARD_URL
    value: "https://healthidsbx.abdm.gov.in/api/v1/account/getSvgCard"
  - name: ABHA_GET_PNG_CARD_URL
    value: "https://healthidsbx.abdm.gov.in/api/v1/account/getPngCard"
  - name: ABHA_QR_ENDPOINT
    value: "https://healthidsbx.abdm.gov.in/api/v1/account/qrCode"
  - name: ENABLE_MIGRATIONS
    value: "false"
  - name: LOGIN_SEND_OTP_URL
    value: "https://abhasbx.abdm.gov.in/abha/api/v3/profile/login/request/otp"
  - name: LOGIN_VERIFY_OTP_URL
    value: "https://abhasbx.abdm.gov.in/abha/api/v3/profile/login/verify"
  - name: PROFILE_LOGIN_REQUEST_OTP_URL
    value: "https://abhasbx.abdm.gov.in/abha/api/v3/profile/login/request/otp"
  - name: PROFILE_LOGIN_VERIFY_OTP_URL
    value: "https://abhasbx.abdm.gov.in/abha/api/v3/profile/login/verify"
  - name: HTTP_CLIENT_TIMEOUT
    value: "15s"  
  - name: INDIVIDUAL_SERVICE_API_URL
    valueFrom:
      configMapKeyRef:
        name: egov-service-host
        key: health-individual
  - name: SERVER_SERVLET_CONTEXT_PATH
    value: "/hcm-abha"
  - name: CONTEXT_PATH
    value: "/hcm-abha"