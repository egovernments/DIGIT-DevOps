apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Chart.Name }}-config
  namespace: {{ .Values.namespace }}
data: 
  egov-erp-override.properties: |
     dev.mode={{ .Values.dev_mode }}
     jpa.showSql={{ .Values.jpa_showSql }}

     master.server={{ .Values.master_server }}
     scheduler.enabled={{ .Values.scheduler }}
     
     sms.enabled={{ .Values.sms }}
     mail.enabled={{ .Values.mail }}
     

     #Overridable Properties
     #redis.enable.embedded=true
     redis.host.name={{ .Values.redis_host }}
     redis.host.port={{ .Values.redis_port }}
     redis.max.pool.size=200
     redis.min.pool.size=20

     {{- if .Values.elastic_config }}
     #Elastic Search Configuration
     {{- tpl  .Values.elastic_config . | nindent 5 }}
     {{- end }}

     {{- if .Values.elastic_search_config }}
     #Elastic Search Configuration
     {{- tpl  .Values.elastic_search_config . | nindent 5 }}
     {{- end }}

     db.flyway.validateon.migrate={{ .Values.db_flyway }}
     # Flyway run Statewide
     statewide.migration.required={{ .Values.statewide_migration }}
     #Captcha setting
     captcha.strength={{ .Values.captcha }}
 
     {{- if .Values.edcrTenants }}
     #Enable or Disable Multitenancy
     multitenancy.enabled={{ .Values.multitenancy }}
     {{- tpl  .Values.edcrTenants .  | nindent 5 }}
     {{- else }}
     #Enable or Disable Multitenancy
     multitenancy.enabled={{ .Values.multitenancy }}
     {{- tpl  .Values.tenants . | nindent 5 }}
     {{- end }}

     {{- if .Values.edcrmicroservice }}
     #---------MicroServices-------------------#
     {{- tpl  .Values.edcrmicroservice . | nindent 5 }}
     {{- end }}
