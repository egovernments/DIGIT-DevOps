global:
  domain: ifix-dev.digit.org
  tracing-enabled: false
  namespace: ifix
  nodepool:
    nodeAffinity: true
    selector: ifixng
    toleration: ifixng

cluster-configs:
  namespaces:
    create: false
    values:
      [ 
        ifix, 
        cert-manager
      ]

  rbac:
    - role: user
      namespaces: [ifix]
    - role: admin
      namespaces: [ifix]

  root-ingress:
    cert-issuer: letsencrypt-prod
  configmaps:
    egov-config:
      data:
        mongo-db-host: "ifix-db.mongo.cosmos.azure.com"
        mongo-db-name: "ifix_dev_db"
        mongo-db-url: "mongodb://ifix-db.mongo.cosmos.azure.com:10255/?ssl=true&retrywrites=false&replicaSet=globaldb&maxIdleTimeMS=120000&appName=@ifix-db@"
        db-host: "postgres.ifix"
        db-name: "ifix_dev_db"
        keycloak-db-name: "keycloak_dev_db"
        db-url: "jdbc:postgresql://postgres.ifix:5432/ifix_dev_db"
        domain: "ifix-dev.ifix.org.in"
        egov-services-fqdn-name: "https://ifix-dev.ifix.org.in/"
        egov-state-level-tenant-id: "pb"
        flyway-locations: "filesystem:/flyway/sql,filesystem:/flyway/seed,filesystem:/flyway/qa"
        kafka-brokers: "kafka-v2.ifix:9092"
        kafka-infra-brokers: "kafka-v2.ifix:9092"
        logging-level-jdbc: "debug"
        serializers-timezone-in-ist: "true"
        server-tomcat-max-threads: "10"
        server-tomcat-max-connections: "500"
        spring-datasource-tomcat-initialSize: "1"
        spring-datasource-tomcat-max-active: "5"
        spring-jpa-show-sql: "true"
        tracer-errors-provideexceptionindetails: "true"
        timezone: "Asia/Kolkata"
        druid-host: "druid-broker.olap"

    egov-service-host:
      data:
        ifix-master-data-service: "http://ifix-master-data-service.ifix:8080/"
        fiscal-event-service: "http://fiscal-event-service.ifix:8080/"
        ifix-zuul: "http://ifix-zuul.ifix:8080/"
        ifix-department-entity-service: "http://ifix-department-entity-service.ifix:8080/"
        keycloak: "http://keycloak.ifix:8080/"
        redis-host: "redis.ifix"

ifix-master-data-service:
  server-context-path: "/ifix-master-data"

fiscal-event-service:
  fiscal-kafka-push-topic: "fiscal-event-request-validated"

fiscal-event-post-processor:
  fiscal-event-kafka-push-topic: "fiscal-event-request-validated"
  fiscal-event-kafka-dereferenced-topic: "fiscal-event-request-dereferenced"
  fiscal-event-kafka-flattened-topic: "fiscal-event-line-item-flattened"
  fiscal-event-processor-kafka-mongodb-topic: "fiscal-event-mongodb-sink"
  fiscal-event-processor-kafka-druid-topic: "fiscal-event-druid-sink"

ifix-zuul:
  replicas: 1
  custom-filter-property: "false"
  tracing-enabled: "true"
  heap: "-Xmx704m -Xms512m"
  server-tomcat-max-threads: "350"
  server-tomcat-max-connections: "1500"
  egov-open-endpoints-whitelist: "/ifix-master-data/government/v1/_search,/ifix-master-data/chartOfAccount/v1/_search,/ifix-master-data/department/v1/_search,/ifix-master-data/expenditure/v1/_search,/ifix-master-data/project/v1/_search,/ifix-department-entity/departmentEntity/v1/_search,/ifix-department-entity/departmentEntity/hierarchyLevel/v1/_search"
  egov-mixed-mode-endpoints-whitelist: ""

fiscal-event-aggregator:
  aggregator-topic-name: "aggregated-fiscal-event"
  aggregator-datasource-name: "fiscal-event"

mongodb-kafka-source-connector:
  mongodb-collection-name: "fiscal_event"
  kafka-topic: "fiscal-event-request-dereferenced"

druid:
  domain: druid-dev.digit.org
  storage: azure
  azure:
    druid_storage_type: azure
    druid_azure_account: ifix
    druid_azure_container: ifixdruid
    druid_azure_protocol: https
    druid_azure_maxTries: "3"
    druid_azure_prefix: druid/segments
  aws:
    druid_storage_type: s3
    druid_storage_baseKey: druid/segments
    druid_storage_bucket: ifix-druid

metabase:
  domain: metabase-dev.digit.org
  siteUrl: metabase-dev.ifix.org.in

# core >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

nginx-ingress:
  replicas: 1
  default-backend-service: "egov/nginx"
  namespace: egov
  cert-issuer: "letsencrypt-prod"
  ssl-protocols: "TLSv1.2 TLSv1.3"
  ssl-ciphers: "EECDH+CHACHA20:EECDH+AES"
  ssl-ecdh-curve: "X25519:prime256v1:secp521r1:secp384r1"
  controller:
    image:
      repository: egovio/nginx-ingress-controller
      tag: "0.26.1"     
    metrics:
      enabled: true
      serviceMonitor:
        enabled: true
    service:
      annotations: 
        service.beta.kubernetes.io/aws-load-balancer-type: nlb           
        enabled: true 
      prometheusRule:
        enabled: true      

cert-manager:
  email: "devops-team@egov.org.in"
  images:
    - "quay.io/jetstack/cert-manager-controller:v0.10.1"
  namespace: ifix

# redis >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
redis:
  replicas: 1
  images:
    - egovio/redis:3.2
# <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

kafka-v2:
  image:
    tag: 5.4.1
  persistence:
    enabled: true
    dataDirSize: "100Gi"
    azure:
      - diskName: "kafka-ifix-0"
        diskUri: /subscriptions/71f67180-c7fb-43dd-988a-e9f9e3135adc/resourceGroups/MC_mgramsewa-dev_mgramsewa-dev_southeastasia/providers/Microsoft.Compute/disks/kafka-ifix-0
      - diskName: "kafka-ifix-1"
        diskUri:  /subscriptions/71f67180-c7fb-43dd-988a-e9f9e3135adc/resourceGroups/MC_mgramsewa-dev_mgramsewa-dev_southeastasia/providers/Microsoft.Compute/disks/kafka-ifix-1
      - diskName: "kafka-ifix-2" 
        diskUri:  /subscriptions/71f67180-c7fb-43dd-988a-e9f9e3135adc/resourceGroups/MC_mgramsewa-dev_mgramsewa-dev_southeastasia/providers/Microsoft.Compute/disks/kafka-ifix-2
  zookeeperHosts: "zookeeper-v2.ifix:2181/kafka-v2"

  heapOptions: "-Xms704M -Xmx704M"
  memory_limits: 1408Mi
  lingerMs: "250"
  numberPartitions: "3"
  replicationFactor: "2"
  minInsyncReplicas: "1"
  offsetsReplicationFactor: "3"

# <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
kafka-connect:
 image:
   repository: kafka-connect-mongo
   tag: 1.5.1

# zookeeper-v2 >>>>>>>>>>>>>>>>>>>>>>>>>>>>>
zookeeper-v2:
  image:
    tag: 5.4.1
  persistence:
    enabled: true
    dataDirSize: "5Gi"
    azure:
      - diskName: "zookeeper-ifix-0"
        diskUri: /subscriptions/71f67180-c7fb-43dd-988a-e9f9e3135adc/resourceGroups/MC_mgramsewa-dev_mgramsewa-dev_southeastasia/providers/Microsoft.Compute/disks/zookeeper-ifix-0
      - diskName: "zookeeper-ifix-1"
        diskUri: /subscriptions/71f67180-c7fb-43dd-988a-e9f9e3135adc/resourceGroups/MC_mgramsewa-dev_mgramsewa-dev_southeastasia/providers/Microsoft.Compute/disks/zookeeper-ifix-1
      - diskName: "zookeeper-ifix-2" 
        diskUri: /subscriptions/71f67180-c7fb-43dd-988a-e9f9e3135adc/resourceGroups/MC_mgramsewa-dev_mgramsewa-dev_southeastasia/providers/Microsoft.Compute/disks/zookeeper-ifix-2


  ## Zookeeper JVM Heap Option
  heapOptions: "-Xms256M -Xmx256M"
  resources:
    # We usually recommend not to specify default resources and to leave this as a conscious
    # choice for the user. This also increases chances charts run on environments with little
    # resources, such as Minikube. If you do want to specify resources, uncomment the following
    # lines, adjust them as necessary, and remove the curly braces after 'resources:'.
    limits:
      cpu: 300m
      memory: 384Mi
    requests:
      cpu: 300m
      memory: 384Mi

# <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

# <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

playground:
  replicas: 1
  images:
    - egovio/playground:mongo-v1

#<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

postgres:
  postgresDatabase: ifix_dev_db
  persistence:
    enabled: true
    azure:
      diskName: "postgres-ifix-db"
      diskUri: /subscriptions/71f67180-c7fb-43dd-988a-e9f9e3135adc/resourcegroups/MC_mgramsewa-dev_mgramsewa-dev_southeastasia/providers/Microsoft.Compute/disks/postgres-ifix-db
      